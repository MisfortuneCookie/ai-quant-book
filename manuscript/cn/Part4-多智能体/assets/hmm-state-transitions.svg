<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 400">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; letter-spacing: 0.5px; }
      .box-text { font: 600 14px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .box-text-small { font: 500 11px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .title { font: 600 12px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; letter-spacing: 1px; }
      .subtitle { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; }
      .obs-text { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <marker id="arrow-down" markerWidth="10" markerHeight="7" refX="3.5" refY="0" orient="auto">
      <polygon points="0 0, 7 0, 3.5 10" fill="#666"/>
    </marker>

    <!-- Diagonal lines for Trending -->
    <pattern id="diagonal-trend" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="6" x2="6" y2="0" stroke="#0d9488" stroke-width="0.8" opacity="0.5"/>
    </pattern>

    <!-- Horizontal lines for Mean-Reverting -->
    <pattern id="horizontal-revert" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="3" x2="6" y2="3" stroke="#0891b2" stroke-width="0.8" opacity="0.5"/>
    </pattern>

    <!-- Crosshatch for Crisis -->
    <pattern id="crosshatch-crisis" width="6" height="6" patternUnits="userSpaceOnUse">
      <line x1="0" y1="0" x2="6" y2="6" stroke="#db2777" stroke-width="0.6" opacity="0.4"/>
      <line x1="6" y1="0" x2="0" y2="6" stroke="#db2777" stroke-width="0.6" opacity="0.4"/>
    </pattern>
  </defs>

  <!-- White background -->
  <rect width="680" height="400" fill="#fff"/>

  <!-- Title -->
  <text x="340" y="28" class="title" text-anchor="middle">HMM STATE TRANSITIONS</text>
  <text x="340" y="44" class="subtitle">隐马尔可夫模型状态转移</text>

  <!-- Hidden States Label -->
  <text x="60" y="120" class="label" text-anchor="start" style="fill: #999;">HIDDEN STATES</text>
  <text x="60" y="134" class="label" text-anchor="start">隐藏状态</text>

  <!-- Three State Circles -->
  <!-- Trending State - Teal -->
  <circle cx="170" cy="130" r="55" fill="#5eead4" stroke="#1a1a1a" stroke-width="1.5"/>
  <circle cx="170" cy="130" r="55" fill="url(#diagonal-trend)"/>
  <text x="170" y="125" class="box-text">趋势</text>
  <text x="170" y="145" class="label">TRENDING</text>

  <!-- Mean-Reverting State - Cyan -->
  <circle cx="340" cy="130" r="55" fill="#67e8f9" stroke="#1a1a1a" stroke-width="1.5"/>
  <circle cx="340" cy="130" r="55" fill="url(#horizontal-revert)"/>
  <text x="340" y="125" class="box-text">震荡</text>
  <text x="340" y="145" class="label">MEAN-REVERTING</text>

  <!-- Crisis State - Pink -->
  <circle cx="510" cy="130" r="55" fill="#f9a8d4" stroke="#1a1a1a" stroke-width="1.5"/>
  <circle cx="510" cy="130" r="55" fill="url(#crosshatch-crisis)"/>
  <text x="510" y="125" class="box-text">危机</text>
  <text x="510" y="145" class="label">CRISIS</text>

  <!-- Bidirectional arrows between states -->
  <!-- Trending <-> Mean-Reverting -->
  <path d="M 225 110 Q 255 80 285 110" fill="none" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <path d="M 285 150 Q 255 180 225 150" fill="none" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Mean-Reverting <-> Crisis -->
  <path d="M 395 110 Q 425 80 455 110" fill="none" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <path d="M 455 150 Q 425 180 395 150" fill="none" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Direct Trending <-> Crisis (curved path over) -->
  <path d="M 200 80 Q 340 20 480 80" fill="none" stroke="#ef4444" stroke-width="1.2" stroke-dasharray="4,2" marker-end="url(#arrow)"/>
  <path d="M 480 180 Q 340 250 200 180" fill="none" stroke="#ef4444" stroke-width="1.2" stroke-dasharray="4,2" marker-end="url(#arrow)"/>

  <!-- Self-loops for persistence -->
  <path d="M 130 85 A 30 30 0 1 1 165 78" fill="none" stroke="#666" stroke-width="1" marker-end="url(#arrow)"/>
  <path d="M 300 85 A 30 30 0 1 1 335 78" fill="none" stroke="#666" stroke-width="1" marker-end="url(#arrow)"/>
  <path d="M 470 85 A 30 30 0 1 1 505 78" fill="none" stroke="#666" stroke-width="1" marker-end="url(#arrow)"/>

  <!-- Observation indicators -->
  <text x="60" y="260" class="label" text-anchor="start" style="fill: #999;">OBSERVATIONS</text>
  <text x="60" y="274" class="label" text-anchor="start">可观察特征</text>

  <!-- Downward arrows to observations -->
  <line x1="170" y1="185" x2="170" y2="220" stroke="#666" stroke-width="1.5" stroke-dasharray="4,2" marker-end="url(#arrow)"/>
  <line x1="340" y1="185" x2="340" y2="220" stroke="#666" stroke-width="1.5" stroke-dasharray="4,2" marker-end="url(#arrow)"/>
  <line x1="510" y1="185" x2="510" y2="220" stroke="#666" stroke-width="1.5" stroke-dasharray="4,2" marker-end="url(#arrow)"/>

  <!-- Observation boxes -->
  <!-- Trending observations -->
  <rect x="100" y="235" width="140" height="70" fill="#f0fdfa" stroke="#1a1a1a" stroke-width="1"/>
  <text x="170" y="258" class="obs-text">高收益</text>
  <text x="170" y="273" class="obs-text">高 ADX</text>
  <text x="170" y="288" class="obs-text">方向明确</text>

  <!-- Mean-Reverting observations -->
  <rect x="270" y="235" width="140" height="70" fill="#ecfeff" stroke="#1a1a1a" stroke-width="1"/>
  <text x="340" y="258" class="obs-text">低波动</text>
  <text x="340" y="273" class="obs-text">低 ADX</text>
  <text x="340" y="288" class="obs-text">区间震荡</text>

  <!-- Crisis observations -->
  <rect x="440" y="235" width="140" height="70" fill="#fdf2f8" stroke="#1a1a1a" stroke-width="1"/>
  <text x="510" y="258" class="obs-text">高波动</text>
  <text x="510" y="273" class="obs-text">高相关性</text>
  <text x="510" y="288" class="obs-text">急跌恐慌</text>

  <!-- Legend -->
  <g transform="translate(100, 340)">
    <line x1="0" y1="5" x2="30" y2="5" stroke="#666" stroke-width="1.5"/>
    <text x="38" y="9" class="label" text-anchor="start">常规转移 / NORMAL TRANSITION</text>

    <line x1="230" y1="5" x2="260" y2="5" stroke="#ef4444" stroke-width="1.2" stroke-dasharray="4,2"/>
    <text x="268" y="9" class="label" text-anchor="start">跳跃转移 / JUMP TRANSITION</text>

    <path d="M 460 -5 A 10 10 0 1 1 475 0" fill="none" stroke="#666" stroke-width="1"/>
    <text x="488" y="9" class="label" text-anchor="start">状态保持 / PERSISTENCE</text>
  </g>

  <!-- State probability example -->
  <rect x="100" y="365" width="480" height="25" fill="#f9fafb" stroke="#ccc" stroke-width="1" rx="2"/>
  <text x="340" y="382" class="label">状态概率示例: P(趋势)=60%, P(震荡)=30%, P(危机)=10%</text>
</svg>
